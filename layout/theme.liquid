<!-- @TODO: fix footer issue and height of main content -->

<!doctype html>
<html lang="{{ shop.locale }}">
    <head>
        <title>{{ page_title }}</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="{{ page_description | escape }}">
        <link rel="canonical" href="{{ canonical_url }}">
        <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
        <meta name="device-size" content="set via css through font-family prop in order to be read by js">

        {% assign developmentMode = true %}

        {% if template.name == "index" %}
            {% assign page_type = "home" %}
        {% elsif template.suffix == "about" %}
            {% assign page_type = "about" %}
        {% elsif template.suffix == "faq" %}
            {% assign page_type = "faq" %}
        {% elsif template.suffix == "terms" %}
            {% assign page_type = "terms" %}
        {% elsif template.suffix == "privacy" %}
            {% assign page_type = "privacy" %}
        {% elsif template.suffix == "contact" %}
            {% assign page_type = "contact" %}
        {% elsif template.suffix == "how-it-works" %}
            {% assign page_type = "how-it-works" %}
        {% elsif template.suffix == "product" %}
            {% assign page_type = "product" %}
        {% elsif template.suffix == "custom-story" %}
            {% assign page_type = "custom-story" %}
        {% endif %}

        {% include 'fonts' %}
        {% include 'additional-styles' %}

        {% if template.suffix == "custom-story" %}
            <script src="https://code.jquery.com/jquery-3.4.1.js"
                integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"> </script>

            {{ 'jquery.cookie.js' | asset_url | script_tag }}
            {{ 'waitForImages.js' | asset_url | script_tag }}
            {{ '8biticon.js' | asset_url | script_tag }}
            {{ 'bootstrap-modal.js' | asset_url | script_tag }}
            {{ 'bootstrap-dropdown.js' | asset_url | script_tag }}
            {{ 'bootstrap-transition.js' | asset_url | script_tag }}
            {{ 'bootstrap-carousel.patched.js' | asset_url | script_tag }}
        {% endif %}

        {{ 'theme.scss.css' | asset_url | stylesheet_tag }}

        {% if developmentMode == true %}
            {{ content_for_header | replace: "<body onload='document._boomrl();'>", "<bodx onload='document._boomrl();'>" }}
        {% else %}
            {{ content_for_header }}
        {% endif %}
    </head>
    <body id="{{ page_type }}" class="{{ page_type | replace: '.', ' ' | truncatewords: 1, '' }}">
        <div id="siteWrapper">
            {% section 'header' %}
            <main id="main">
                {{ content_for_layout }}
            </main>
            {% if template.suffix != "custom-story" %}
                {% section 'footer' %}
            {% endif %}
        </div>
        {{ 'theme.js' | asset_url | script_tag }}
        
        {% if template.suffix == "custom-story" %}
            {{ 'avatarConstructor.js' | asset_url | script_tag }}
            {{ 'storybook__nav.js' | asset_url | script_tag }}
            {{ 'storybook_steps.js' | asset_url | script_tag }}
            {{ 'creator.js' | asset_url | script_tag }}
        {% endif %}
    </body>
</html>